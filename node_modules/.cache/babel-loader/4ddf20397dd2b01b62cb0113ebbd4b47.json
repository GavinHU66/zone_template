{"remainingRequest":"/Users/superhqy/Desktop/zone/foyozone/node_modules/babel-loader/lib/index.js!/Users/superhqy/Desktop/zone/foyozone/src/store/modules/templateControl.js","dependencies":[{"path":"/Users/superhqy/Desktop/zone/foyozone/src/store/modules/templateControl.js","mtime":1563515855554},{"path":"/Users/superhqy/Desktop/zone/foyozone/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/superhqy/Desktop/zone/foyozone/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import createUniqueString from \"@/util/uniqueString\";\n\nfunction printStruct(list3d) {\n  var str = \"\";\n\n  for (var i = 0; i < list3d.length; i++) {\n    var lists = list3d[i].lists;\n\n    for (var j = 0; j < lists.length; j++) {\n      for (var k = 0; k < lists[j].length; k++) {\n        str += lists[j][k].chiAlias + \" \";\n      }\n\n      str += '\\n';\n    }\n  }\n\n  console.log(str);\n}\n\nfunction convertName(chiAlias) {\n  if (chiAlias == \"个人资料\") {\n    return \"UserInfo\";\n  } else if (chiAlias == \"最新消息\") {\n    return \"LatestNews\";\n  } else if (chiAlias == \"待办消息\") {\n    return \"Todo\";\n  } else if (chiAlias == \"近期文章\") {\n    return \"EssayList\";\n  } else if (chiAlias == \"留言板\") {\n    return \"MsgBoard\";\n  } else if (chiAlias == \"最近访客\") {\n    return \"CurrentVisitor\";\n  }\n}\n\nvar ls_moduleLists = [{\n  moduleId: createUniqueString(),\n  scaleType: \"t13\",\n  lists: [[{\n    name: \"UserInfo\",\n    id: createUniqueString(),\n    chiAlias: \"个人资料\",\n    shouldShow: true\n  }, {\n    name: \"LatestNews\",\n    id: createUniqueString(),\n    chiAlias: \"最新消息\",\n    shouldShow: true\n  }, {\n    name: \"Todo\",\n    id: createUniqueString(),\n    chiAlias: \"待办消息\",\n    shouldShow: true\n  }], [{\n    name: \"EssayList\",\n    id: createUniqueString(),\n    chiAlias: \"近期文章\",\n    shouldShow: true\n  }, {\n    name: \"ExternalItem\",\n    id: createUniqueString(),\n    chiAlias: \"外部组件试\",\n    shouldShow: true,\n    externalSrc: \"http://data.nullehome.com/#/attests/details\"\n  }, {\n    name: \"MsgBoard\",\n    id: createUniqueString(),\n    chiAlias: \"留言板\",\n    shouldShow: true\n  }], []]\n}, {\n  moduleId: createUniqueString(),\n  scaleType: \"t13\",\n  lists: [[{\n    name: \"CurrentVisitor\",\n    id: createUniqueString(),\n    chiAlias: \"最近访客\",\n    shouldShow: true\n  }, {\n    name: \"UserInfo\",\n    id: createUniqueString(),\n    chiAlias: \"个人资料\",\n    shouldShow: true\n  }, {\n    name: \"LatestNews\",\n    id: createUniqueString(),\n    chiAlias: \"最新消息\",\n    shouldShow: true\n  }, {\n    name: \"Todo\",\n    id: createUniqueString(),\n    chiAlias: \"待办消息\",\n    shouldShow: true\n  }], [{\n    name: \"EssayList\",\n    id: createUniqueString(),\n    chiAlias: \"近期文章\",\n    shouldShow: true\n  }, {\n    name: \"MsgBoard\",\n    id: createUniqueString(),\n    chiAlias: \"留言板\",\n    shouldShow: true\n  }], []]\n}];\n\ntry {\n  if (localStorage) {\n    if (localStorage.getItem(\"ls_moduleLists\") !== null) {\n      ls_moduleLists = JSON.parse(localStorage.getItem(\"ls_moduleLists\"));\n    }\n  }\n} catch (e) {\n  console.log(\"we don't have localStorage\");\n}\n\nvar templateControl = {\n  namespaced: true,\n  state: {\n    moduleListsTmp: ls_moduleLists,\n    // render at template page (when doing changes, apply changes to this tmp variable)\n    moduleLists: ls_moduleLists // render elsewhere (eg home page)\n\n  },\n  mutations: {\n    addLists: function addLists(state, payload) {\n      var newModuleId = createUniqueString();\n      var newScaleType = payload.scaleType;\n      var newLists = [];\n\n      if (newScaleType.length === 2) {\n        newLists = [[{\n          name: \"UserInfo\",\n          id: createUniqueString(),\n          chiAlias: \"个人资料\",\n          shouldShow: true\n        }], [], []];\n      } else if (newScaleType.length === 3) {\n        newLists = [[{\n          name: \"UserInfo\",\n          id: createUniqueString(),\n          chiAlias: \"个人资料\",\n          shouldShow: true\n        }], [{\n          name: \"UserInfo\",\n          id: createUniqueString(),\n          chiAlias: \"个人资料\",\n          shouldShow: true\n        }], []];\n      } else if (newScaleType.length === 4) {\n        newLists = [[{\n          name: \"UserInfo\",\n          id: createUniqueString(),\n          chiAlias: \"个人资料\",\n          shouldShow: true\n        }], [{\n          name: \"UserInfo\",\n          id: createUniqueString(),\n          chiAlias: \"个人资料\",\n          shouldShow: true\n        }], [{\n          name: \"UserInfo\",\n          id: createUniqueString(),\n          chiAlias: \"个人资料\",\n          shouldShow: true\n        }]];\n      }\n\n      var newLists = {\n        moduleId: newModuleId,\n        scaleType: newScaleType,\n        lists: newLists\n      };\n      state.moduleListsTmp.push(newLists);\n      state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n    },\n    // end of addLists\n    deleteModule: function deleteModule(state, payload) {\n      for (var i = 0; i < state.moduleListsTmp.length; i++) {\n        if (state.moduleListsTmp[i].moduleId === payload.moduleId) {\n          state.moduleListsTmp.splice(i, 1);\n        }\n      }\n\n      state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n    },\n    // end of deleteModule\n    moveModule: function moveModule(state, payload) {\n      for (var i = 0; i < state.moduleListsTmp.length; i++) {\n        if (state.moduleListsTmp[i].moduleId == payload.moduleId) {\n          var moduleTmp = state.moduleListsTmp[i]; // copy of target module\n\n          state.moduleListsTmp.splice(i, 1);\n        }\n      }\n\n      state.moduleListsTmp.splice(payload.newIdx, 0, moduleTmp);\n      state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n    },\n    // end of moveModule\n    deleteItem: function deleteItem(state, payload) {\n      console.log(\"in mutations: deleteItem\");\n\n      for (var i = 0; i < state.moduleListsTmp.length; i++) {\n        if (state.moduleListsTmp[i].moduleId === payload.moduleId) {\n          for (var j = 0; j < state.moduleListsTmp[i].lists.length; j++) {\n            for (var k = 0; k < state.moduleListsTmp[i].lists[j].length; k++) {\n              if (state.moduleListsTmp[i].lists[j][k].id === payload.id) {\n                state.moduleListsTmp[i].lists[j].splice(k, 1);\n              }\n            }\n          }\n        }\n      }\n\n      state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n    },\n    // end of deleteItem\n    toggleItemDisplay: function toggleItemDisplay(state, payload) {\n      for (var i = 0; i < state.moduleListsTmp.length; i++) {\n        if (state.moduleListsTmp[i].moduleId === payload.moduleId) {\n          for (var j = 0; j < state.moduleListsTmp[i].lists.length; j++) {\n            for (var k = 0; k < state.moduleListsTmp[i].lists[j].length; k++) {\n              if (state.moduleListsTmp[i].lists[j][k].id === payload.id) {\n                state.moduleListsTmp[i].lists[j][k].shouldShow = !state.moduleListsTmp[i].lists[j][k].shouldShow;\n              }\n            }\n          }\n        }\n      }\n\n      state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n    },\n    // end of toggleItemDisplay\n    addNewItem: function addNewItem(state, payload) {\n      console.log(\"in mutations: addNewItem\");\n      console.log(\"payload\", payload);\n      var newItem = new Object();\n\n      if (payload.itemType == \"external\") {\n        // {itemType: \"external\", itemName: this.itemName, itemUrl: this.itemUrl}\n        var newItem = {\n          name: \"ExternalItem\",\n          id: createUniqueString(),\n          chiAlias: payload.itemName,\n          shouldShow: true,\n          externalSrc: payload.itemUrl\n        };\n      } else if (payload.itemType == \"internal\") {\n        // {itemType: \"internal\", itemName: this.selectedType}\n        console.log(\"payload\", payload);\n        var newItem = {\n          name: convertName(payload.itemName),\n          id: createUniqueString(),\n          chiAlias: payload.itemName,\n          shouldShow: true\n        };\n      }\n\n      for (var i = 0; i < state.moduleListsTmp.length; i++) {\n        if (state.moduleListsTmp[i].moduleId === payload.moduleId) {\n          for (var j = 0; j < state.moduleListsTmp[i].lists.length; j++) {\n            for (var k = 0; k < state.moduleListsTmp[i].lists[j].length; k++) {\n              if (j == payload.colIndex && k == payload.rowIndex) {\n                state.moduleListsTmp[i].lists[j].splice(k, 0, newItem);\n              }\n            }\n          }\n        }\n      }\n\n      state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n    },\n    // end of addNewItem\n    switchModeTmp: function switchModeTmp(state, payload) {\n      // payload\n      // {newScaleType: \"t121\", moduleId: \"2\"}\n      var newType = payload.newScaleType;\n\n      for (var i = 0; i < state.moduleListsTmp.length; i++) {\n        if (state.moduleListsTmp[i].moduleId === payload.moduleId) {\n          var oldType = state.moduleListsTmp[i].scaleType;\n          state.moduleListsTmp[i].scaleType = newType; // modify the array if necessary\n\n          if (oldType.length !== newType.length) {\n            if (oldType.length == 4 && newType.length == 3) {\n              console.log(\" 3->2 \");\n\n              if (state.moduleListsTmp[i].lists[2].length !== 0) {\n                state.moduleListsTmp[i].lists[1] = state.moduleListsTmp[i].lists[1].concat(state.moduleListsTmp[i].lists[2]);\n                state.moduleListsTmp[i].lists[2] = []; // 3rd col become empty\n              }\n            } else if (oldType.length == 3 && newType.length == 4) {\n              console.log(\" 2->3 \");\n\n              if (state.moduleListsTmp[i].lists[1].length >= 2) {\n                state.moduleListsTmp[i].lists[2].push(state.moduleListsTmp[i].lists[1].pop()); // push last module in 2nd col to the 3rd col\n              }\n            } else if (oldType.length == 3 && newType.length == 2) {\n              console.log(\" 2->1 \");\n\n              if (state.moduleListsTmp[i].lists[1].length !== 0) {\n                state.moduleListsTmp[i].lists[0] = state.moduleListsTmp[i].lists[0].concat(state.moduleListsTmp[i].lists[1]);\n                state.moduleListsTmp[i].lists[1] = []; // 3rd col become empty\n              }\n            } else if (oldType.length == 4 && newType.length == 2) {\n              console.log(\" 3->1 \"); // move the last module in the 2nd col to the 3rd col\n\n              if (state.moduleListsTmp[i].lists[1].length !== 0) {\n                state.moduleListsTmp[i].lists[0] = state.moduleListsTmp[i].lists[0].concat(state.moduleListsTmp[i].lists[1]);\n                state.moduleListsTmp[i].lists[1] = []; // 3rd col become empty\n              }\n\n              if (state.moduleListsTmp[i].lists[2].length !== 0) {\n                state.moduleListsTmp[i].lists[0] = state.moduleListsTmp[i].lists[0].concat(state.moduleListsTmp[i].lists[2]);\n                state.moduleListsTmp[i].lists[2] = []; // 3rd col become empty\n              }\n            } else if (oldType.length == 2 && newType.length == 3) {\n              console.log(\" 1->2 \");\n\n              if (state.moduleListsTmp[i].lists[0].length >= 2) {\n                state.moduleListsTmp[i].lists[1].push(state.moduleListsTmp[i].lists[0].pop()); // push last module in 1st col to the 2nd col\n              }\n            } else if (oldType.length == 2 && newType.length == 4) {\n              console.log(\" 1->3 \");\n\n              if (state.moduleListsTmp[i].lists[0].length >= 3) {\n                state.moduleListsTmp[i].lists[1].push(state.moduleListsTmp[i].lists[0].pop()); // push last module in 1st col to the 2nd col\n\n                state.moduleListsTmp[i].lists[2].push(state.moduleListsTmp[i].lists[0].pop()); // push last module in 1st col to the 3rd col\n              }\n            }\n          }\n        }\n      }\n\n      state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n    },\n    setModuleListsTmp: function setModuleListsTmp(state, payload) {\n      for (var i = 0; i < state.moduleListsTmp.length; i++) {\n        if (state.moduleListsTmp[i].moduleId === payload.moduleId) {\n          state.moduleListsTmp[i].lists = payload.lists;\n          break;\n        }\n      }\n\n      state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n    },\n    saveEditing: function saveEditing(state) {\n      // apply the change to moduleLists\n      state.moduleLists = state.moduleListsTmp;\n      state.moduleLists = JSON.parse(JSON.stringify(state.moduleLists));\n\n      try {\n        if (localStorage) {\n          localStorage.setItem('ls_moduleLists', JSON.stringify(state.moduleLists));\n          alert(\"已保存\");\n        }\n      } catch (e) {\n        console.log(\"we don't have localStorage\");\n      }\n    }\n  },\n  actions: {\n    toggleModuleDisplayTmp: function toggleModuleDisplayTmp(_ref, payload) {\n      var commit = _ref.commit;\n      commit(\"toggleModuleDisplayTmp\", payload);\n    },\n    switchModeTmp: function switchModeTmp(_ref2, payload) {\n      var commit = _ref2.commit;\n      commit(\"switchModeTmp\", payload);\n    },\n    setModuleListsTmp: function setModuleListsTmp(_ref3, payload) {\n      var commit = _ref3.commit;\n      commit(\"setModuleListsTmp\", payload);\n    },\n    saveEditing: function saveEditing(_ref4, payload) {\n      var commit = _ref4.commit;\n      commit(\"saveEditing\", payload);\n    }\n  }\n};\nexport default templateControl;",{"version":3,"sources":["/Users/superhqy/Desktop/zone/foyozone/src/store/modules/templateControl.js"],"names":["createUniqueString","printStruct","list3d","str","i","length","lists","j","k","chiAlias","console","log","convertName","ls_moduleLists","moduleId","scaleType","name","id","shouldShow","externalSrc","localStorage","getItem","JSON","parse","e","templateControl","namespaced","state","moduleListsTmp","moduleLists","mutations","addLists","payload","newModuleId","newScaleType","newLists","push","stringify","deleteModule","splice","moveModule","moduleTmp","newIdx","deleteItem","toggleItemDisplay","addNewItem","newItem","Object","itemType","itemName","itemUrl","colIndex","rowIndex","switchModeTmp","newType","oldType","concat","pop","setModuleListsTmp","saveEditing","setItem","alert","actions","toggleModuleDisplayTmp","commit"],"mappings":"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","sourcesContent":["import createUniqueString from \"@/util/uniqueString\";\n\nfunction printStruct(list3d){\n    var str = \"\";\n    for (let i=0; i<list3d.length; i++){\n      var lists = list3d[i].lists;\n      for (let j=0; j<lists.length; j++){\n        for (let k=0; k<lists[j].length; k++){\n            str += lists[j][k].chiAlias + \" \";\n        } \n        str += '\\n';\n      }\n    }\n    console.log(str);\n}\n\nfunction convertName (chiAlias) {\n    if (chiAlias == \"个人资料\"){\n        return \"UserInfo\";\n    } else if (chiAlias == \"最新消息\"){\n        return \"LatestNews\";\n    } else if (chiAlias == \"待办消息\"){\n        return \"Todo\";\n    } else if (chiAlias == \"近期文章\"){\n        return \"EssayList\";\n    } else if (chiAlias == \"留言板\"){\n        return \"MsgBoard\";\n    } else if (chiAlias == \"最近访客\"){\n        return \"CurrentVisitor\";\n    }\n}\n\n\nlet ls_moduleLists = [\n\n        {\n            moduleId: createUniqueString(),\n            scaleType: \"t13\",\n            lists:  \n            [\n                [\n                    { name: \"UserInfo\", id: createUniqueString(), chiAlias: \"个人资料\", shouldShow: true },\n                    { name: \"LatestNews\", id: createUniqueString(), chiAlias: \"最新消息\", shouldShow: true },\n                    { name: \"Todo\", id: createUniqueString(), chiAlias: \"待办消息\", shouldShow: true },\n                ],\n                [\n                    { name: \"EssayList\", id: createUniqueString(), chiAlias: \"近期文章\", shouldShow: true },\n                    { name: \"ExternalItem\", id: createUniqueString(), chiAlias: \"外部组件试\", shouldShow: true, externalSrc: \"http://data.nullehome.com/#/attests/details\" },\n                    { name: \"MsgBoard\", id: createUniqueString(), chiAlias: \"留言板\", shouldShow: true },\n                ],\n                [\n        \n                ]\n            ]      \n        },\n\n        {\n            moduleId: createUniqueString(),\n            scaleType: \"t13\",\n            lists:  \n            [\n                [\n                    { name: \"CurrentVisitor\", id: createUniqueString(), chiAlias: \"最近访客\", shouldShow: true },\n                    { name: \"UserInfo\", id: createUniqueString(), chiAlias: \"个人资料\", shouldShow: true },\n                    { name: \"LatestNews\", id: createUniqueString(), chiAlias: \"最新消息\", shouldShow: true },\n                    { name: \"Todo\", id: createUniqueString(), chiAlias: \"待办消息\", shouldShow: true },\n                ],\n                [\n                    { name: \"EssayList\", id: createUniqueString(), chiAlias: \"近期文章\", shouldShow: true },\n                    { name: \"MsgBoard\", id: createUniqueString(), chiAlias: \"留言板\", shouldShow: true },\n                ],\n                [\n        \n                ]\n            ]      \n        },\n\n    ];\n\n\n\ntry {\n    if (localStorage) {\n        if (localStorage.getItem(\"ls_moduleLists\") !== null){\n            ls_moduleLists = JSON.parse(localStorage.getItem(\"ls_moduleLists\"));\n        }\n    }\n} catch (e) {console.log(\"we don't have localStorage\")}\n\nconst templateControl = {\n\n    namespaced: true,\n\n    state: {\n        moduleListsTmp: ls_moduleLists, // render at template page (when doing changes, apply changes to this tmp variable)\n        moduleLists: ls_moduleLists, // render elsewhere (eg home page)\n    },\n\n    mutations: {\n\n        addLists(state, payload){\n            var newModuleId = createUniqueString();\n            var newScaleType = payload.scaleType;\n            var newLists = []; \n\n            if (newScaleType.length === 2){\n                newLists = [\n                    [\n                        { name: \"UserInfo\", id: createUniqueString(), chiAlias: \"个人资料\", shouldShow: true },\n                    ],\n                    [],\n                    [],\n                ];\n            } else if (newScaleType.length === 3){\n                newLists = [\n                    [\n                        { name: \"UserInfo\", id: createUniqueString(), chiAlias: \"个人资料\", shouldShow: true },\n                    ],\n                    [\n                        { name: \"UserInfo\", id: createUniqueString(), chiAlias: \"个人资料\", shouldShow: true },\n                    ],\n                    [],\n                ];\n            } else if (newScaleType.length === 4){\n                newLists = [\n                    [\n                        { name: \"UserInfo\", id: createUniqueString(), chiAlias: \"个人资料\", shouldShow: true },\n                    ],\n                    [\n                        { name: \"UserInfo\", id: createUniqueString(), chiAlias: \"个人资料\", shouldShow: true },\n                    ],\n                    [\n                        { name: \"UserInfo\", id: createUniqueString(), chiAlias: \"个人资料\", shouldShow: true },\n                    ],\n                ];\n            }\n            var newLists = {\n                moduleId: newModuleId,\n                scaleType: newScaleType,\n                lists: newLists,    \n            };\n            state.moduleListsTmp.push(newLists);\n            state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n        }, // end of addLists\n\n        deleteModule(state, payload) {\n            for(let i=0; i<state.moduleListsTmp.length; i++){\n                if (state.moduleListsTmp[i].moduleId === payload.moduleId){\n                    state.moduleListsTmp.splice(i, 1);\n                }\n            }\n            state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n        }, // end of deleteModule\n\n        moveModule(state, payload) {\n            for (let i=0; i<state.moduleListsTmp.length; i++){\n                if (state.moduleListsTmp[i].moduleId == payload.moduleId){\n                    var moduleTmp = state.moduleListsTmp[i]; // copy of target module\n                    state.moduleListsTmp.splice(i, 1);\n                }\n            }\n            state.moduleListsTmp.splice(payload.newIdx, 0, moduleTmp);\n            state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));         \n        }, // end of moveModule\n\n        deleteItem(state, payload) {\n            console.log(\"in mutations: deleteItem\");\n            for(let i=0; i<state.moduleListsTmp.length; i++){\n                if (state.moduleListsTmp[i].moduleId === payload.moduleId){\n                    for (let j=0; j<state.moduleListsTmp[i].lists.length; j++){\n                        for (let k=0; k<state.moduleListsTmp[i].lists[j].length; k++){\n                            if (state.moduleListsTmp[i].lists[j][k].id === payload.id){\n                                state.moduleListsTmp[i].lists[j].splice(k, 1);\n                            }\n                        }   \n                    }\n                }\n            }\n            state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n        }, // end of deleteItem\n\n        toggleItemDisplay(state, payload){\n            for(let i=0; i<state.moduleListsTmp.length; i++){\n                if (state.moduleListsTmp[i].moduleId === payload.moduleId){\n                    for (let j=0; j<state.moduleListsTmp[i].lists.length; j++){\n                        for (let k=0; k<state.moduleListsTmp[i].lists[j].length; k++){\n                            if (state.moduleListsTmp[i].lists[j][k].id === payload.id){\n                                state.moduleListsTmp[i].lists[j][k].shouldShow = !state.moduleListsTmp[i].lists[j][k].shouldShow;\n                            }\n                        }   \n                    }\n                }\n            }\n            state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));         \n        }, // end of toggleItemDisplay\n\n\n        addNewItem(state, payload) {\n            console.log(\"in mutations: addNewItem\");\n            console.log(\"payload\", payload);\n\n            var newItem = new Object();\n\n            if (payload.itemType == \"external\"){\n                // {itemType: \"external\", itemName: this.itemName, itemUrl: this.itemUrl}\n                var newItem = { name: \"ExternalItem\", id: createUniqueString(), chiAlias: payload.itemName, shouldShow: true, externalSrc: payload.itemUrl};\n\n            } else if (payload.itemType == \"internal\"){\n                // {itemType: \"internal\", itemName: this.selectedType}\n                console.log(\"payload\", payload);\n                var newItem = { name: convertName(payload.itemName), id: createUniqueString(), chiAlias: payload.itemName, shouldShow: true};\n            }\n\n            for (let i=0; i<state.moduleListsTmp.length; i++){\n                if (state.moduleListsTmp[i].moduleId === payload.moduleId){\n\n                    for (let j=0; j<state.moduleListsTmp[i].lists.length; j++){\n                        for (let k=0; k<state.moduleListsTmp[i].lists[j].length; k++){\n                            if (j == payload.colIndex && k == payload.rowIndex){\n                                state.moduleListsTmp[i].lists[j].splice(k, 0, newItem);           \n                            }\n                        }\n                    }\n\n                }\n            }\n            state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n\n        }, // end of addNewItem\n\n        switchModeTmp(state, payload){\n\n            // payload\n            // {newScaleType: \"t121\", moduleId: \"2\"}\n\n            var newType = payload.newScaleType;\n\n            for (let i=0; i<state.moduleListsTmp.length; i++) {\n                if (state.moduleListsTmp[i].moduleId === payload.moduleId){\n                    var oldType = state.moduleListsTmp[i].scaleType;\n                    state.moduleListsTmp[i].scaleType = newType;\n\n                    // modify the array if necessary\n                    if (oldType.length !== newType.length){\n                        if (oldType.length == 4 && newType.length == 3){\n                            console.log(\" 3->2 \");\n                            if (state.moduleListsTmp[i].lists[2].length !== 0){\n                                state.moduleListsTmp[i].lists[1] = state.moduleListsTmp[i].lists[1].concat(state.moduleListsTmp[i].lists[2]);\n                                state.moduleListsTmp[i].lists[2] = []; // 3rd col become empty\n                            }\n                        }\n                        else if (oldType.length == 3 && newType.length == 4){\n                            console.log(\" 2->3 \");\n                            if (state.moduleListsTmp[i].lists[1].length >= 2){\n                                state.moduleListsTmp[i].lists[2].push(state.moduleListsTmp[i].lists[1].pop()); // push last module in 2nd col to the 3rd col\n                            }\n                        }\n                        else if (oldType.length == 3 && newType.length == 2){\n                            console.log(\" 2->1 \");\n                            if (state.moduleListsTmp[i].lists[1].length !== 0){\n                                state.moduleListsTmp[i].lists[0] = state.moduleListsTmp[i].lists[0].concat(state.moduleListsTmp[i].lists[1]);\n                                state.moduleListsTmp[i].lists[1] = []; // 3rd col become empty\n                            }\n                        }\n                        else if (oldType.length == 4 && newType.length == 2){\n                            console.log(\" 3->1 \");\n                            // move the last module in the 2nd col to the 3rd col\n                            if (state.moduleListsTmp[i].lists[1].length !== 0){\n                                state.moduleListsTmp[i].lists[0] = state.moduleListsTmp[i].lists[0].concat(state.moduleListsTmp[i].lists[1]);\n                                state.moduleListsTmp[i].lists[1] = []; // 3rd col become empty\n                            }\n                            if (state.moduleListsTmp[i].lists[2].length !== 0){\n                                state.moduleListsTmp[i].lists[0] = state.moduleListsTmp[i].lists[0].concat(state.moduleListsTmp[i].lists[2]);\n                                state.moduleListsTmp[i].lists[2] = []; // 3rd col become empty\n                            }\n                        }\n                        else if (oldType.length == 2 && newType.length == 3){\n                            console.log(\" 1->2 \");\n                            if (state.moduleListsTmp[i].lists[0].length >= 2){\n                                state.moduleListsTmp[i].lists[1].push(state.moduleListsTmp[i].lists[0].pop()); // push last module in 1st col to the 2nd col\n                            }\n                        }\n                        else if (oldType.length == 2 && newType.length == 4){\n                            console.log(\" 1->3 \");\n                            if (state.moduleListsTmp[i].lists[0].length >= 3){\n                                state.moduleListsTmp[i].lists[1].push(state.moduleListsTmp[i].lists[0].pop()); // push last module in 1st col to the 2nd col\n                                state.moduleListsTmp[i].lists[2].push(state.moduleListsTmp[i].lists[0].pop()); // push last module in 1st col to the 3rd col\n                            }\n                        }\n\n\n                    }\n                }\n            }\n            state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n        },\n\n        setModuleListsTmp(state, payload){            \n            for (let i=0; i<state.moduleListsTmp.length; i++) {\n                if (state.moduleListsTmp[i].moduleId === payload.moduleId){\n                    state.moduleListsTmp[i].lists = payload.lists;\n                    break;\n                }\n            }\n            state.moduleListsTmp = JSON.parse(JSON.stringify(state.moduleListsTmp));\n        },\n\n        saveEditing (state) { // apply the change to moduleLists\n            state.moduleLists = state.moduleListsTmp;\n            state.moduleLists = JSON.parse(JSON.stringify(state.moduleLists));\n            try {\n                if (localStorage) {\n                  localStorage.setItem('ls_moduleLists', JSON.stringify(state.moduleLists));\n                  alert(\"已保存\");\n                }\n              } catch (e) {console.log(\"we don't have localStorage\")}\n        },\n\n\n\n    },\n\n    actions: {\n        toggleModuleDisplayTmp({commit}, payload){\n            commit(\"toggleModuleDisplayTmp\", payload);\n        },\n        switchModeTmp({commit}, payload){\n            commit(\"switchModeTmp\", payload);\n        },\n        setModuleListsTmp({commit}, payload){\n            commit(\"setModuleListsTmp\", payload);\n        },\n        saveEditing({commit}, payload){\n            commit(\"saveEditing\", payload);\n        },\n        \n    },\n\n  }\n  \n  export default templateControl\n  "]}]}